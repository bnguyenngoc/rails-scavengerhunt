<h1> Challenges page </h1>

<% if policy(@challenges).create? %>
    <%= link_to 'Create new challenge', new_challenge_path, class: 'btn btn-primary btn-lg' %>
<% end %>

<% if !@challenges.empty?%>
    <div class="table-responsive">
        <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
            <thead class="thead-dark">
                <tr>
                    <th>Type </th>
                    <th>Challenge</th>
                    <th>Description</th>
                    <th>Score</th>
                    <th>Actions </th>
                </tr>
            </thead>
            <tbody>
                <% @challenges.each do |t| %>
                    <tr>
                        <td><%= t.challenge_type %> </td>
                        <td><%= t.title %></td>
                        <td> <%= t.description %> </td>
                        <td> <%= t.score %> </td>
                        <td>
                            <%= link_to 'Submit', challenge_path(t) %>
                            <% if policy(t).update? %>
                            |
                                <%= link_to 'Edit', edit_challenge_path(t)%>
                            <% end %>
                            <% if policy(t).destroy? %>
                               | <%= link_to 'Delete', challenge_path(t), :method => :delete, data: {confirm: "Are you sure?"}%>
                            <% end %>
                        </td> 
                    </tr>
                <% end %>
            </tbody>
        </table>
    </div>
<% end %>